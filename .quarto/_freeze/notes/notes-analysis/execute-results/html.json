{
  "hash": "8d27a9623c8b1fb730cfaf1166f31687",
  "result": {
    "markdown": "---\ntitle: \"Price of Eggs\"\nformat: \n  html:\n    toc: true\n    number-sections: true\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)  # ecosystem of data science packages\nlibrary(lubridate)  # for working with dates\n```\n:::\n\n\n\n\n# Source: NYT\n\nThe data visualization of this report is based on the following article \n(by Ashley Wu) of The New York Times (Feb 3, 2023):\n\n__Why Eggs Cost So Much__\n\n<https://www.nytimes.com/2023/02/03/briefing/why-eggs-cost-so-much.html>\n\n\n::: {.callout-note icon=false}\n## Note\n\nWe are assuming that you have read the article cited above.\n:::\n\n\n\n# Data\n\nThe data behind the NYT article comes from one of the databases of the \n_US Bureau of Labor Statistics_ (BLS), namely, the\n_Consumer Price Index Average Price Data_.\n\nSpecifically, the time series data is in the following link: \n<https://data.bls.gov/timeseries/APU0000708111>\n\n- __Series Id__:\tAPU0000708111\n- __Series Title__:\tEggs, grade A, large, per doz. in U.S. city average, average price, not seasonally adjusted\n- __Area__:\tU.S. city average\n- __Item__:\tEggs, grade A, large, per doz.\n\n\n## Data File\n\nThe data is in the text file `\"price-of-eggs-timeseries.txt\"` available\nin the following link:\n\n[price-of-eggs-timeseries.txt](price-of-eggs-timeseries.txt)\n\n\nAssuming that you have this file in your working directory, you can import it as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl = read_csv(\n  file = \"price-of-eggs-timeseries.txt\", \n  col_types = cols(\n    Year = col_double(),\n    Jan = col_double(),\n    Feb = col_double(),\n    Mar = col_double(),\n    Apr = col_double(),\n    May = col_double(),\n    Jun = col_double(),\n    Jul = col_double(),\n    Aug = col_double(),\n    Sep = col_double(),\n    Oct = col_double(),\n    Nov = col_double(),\n    Dec = col_double())\n)\n\nhead(tbl)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 13\n   Year   Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec\n  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n1  2000 0.975 0.962 0.931 0.939 0.852 0.838 0.868 0.893 0.92  0.923 0.902 0.959\n2  2001 1.01  0.943 0.886 1.03  0.881 0.92  0.862 0.929 0.916 0.916 0.935 0.925\n3  2002 0.973 0.996 1.00  1.05  0.997 0.975 0.99  1.05  1.06  1.04  1.08  1.18 \n4  2003 1.18  1.19  1.21  1.13  1.01  1.20  1.15  1.28  1.26  1.33  1.45  1.56 \n5  2004 1.57  1.58  1.62  1.56  1.37  1.31  1.25  1.28  1.14  1.09  1.08  1.20 \n6  2005 1.21  1.28  1.13  1.16  1.18  1.14  1.16  1.17  1.28  1.26  1.28  1.35 \n```\n:::\n:::\n\n\n\n## Data Preparation\n\nFor `ggplot` convenience, it's better if we pivot the table to __long__ or\n__tall__ format so that we only work with 3 variables or columns: \n`Year`, `Month`, and `Price`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pivot to longer format\ndat = pivot_longer(\n  data = tbl, \n  cols = Jan:Dec,      # columns to be pivoted\n  names_to = \"Month\",  # name of column with categorical values\n  values_to = \"Price\") # name of column with numeric values\n\nhead(dat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n   Year Month Price\n  <dbl> <chr> <dbl>\n1  2000 Jan   0.975\n2  2000 Feb   0.962\n3  2000 Mar   0.931\n4  2000 Apr   0.939\n5  2000 May   0.852\n6  2000 Jun   0.838\n```\n:::\n:::\n\n\nSince we are working with time series data, we also need to add a `Date` column \nwith dates:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add date column\ndat = dat |>\n  mutate(Date = as.Date(paste0(Year, \"-\", Month, \"-01\"), \"%Y-%b-%d\"))\n\nhead(dat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n   Year Month Price Date      \n  <dbl> <chr> <dbl> <date>    \n1  2000 Jan   0.975 2000-01-01\n2  2000 Feb   0.962 2000-02-01\n3  2000 Mar   0.931 2000-03-01\n4  2000 Apr   0.939 2000-04-01\n5  2000 May   0.852 2000-05-01\n6  2000 Jun   0.838 2000-06-01\n```\n:::\n:::\n\n\n\n-----\n\n\n# Graph: Timeline\n\nKeep in mind that the timeline of the NYT article goes from Jan-2000 to Dec-2022.\nIn our case, we have a few more data points (12 months of 2023).\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# replicated graphic\nggplot(data = dat, aes(x = Date, y = Price)) +\n  geom_hline(yintercept = 0:5, color = \"gray90\") +\n  geom_line(color = \"orange\", linewidth = 0.8)  +\n  geom_point(x = as.Date(\"2023-01-01\"), y = 4.823, color = \"orange\") +\n  scale_x_date(breaks = as.Date(paste0(seq(2000, 2024, by = 5), \"-01-01\"), \"%Y-%m-%d\")) +\n  scale_y_continuous(breaks = 0:5, labels = paste0(\"$\", 0:5)) +\n  annotate(geom = \"text\", x = as.Date(\"2022-12-31\"), y = 5.3, \n           label = \"Jan-2023\", hjust = 1, color = \"gray70\", size = 3.5) + \n  annotate(geom = \"text\", x = as.Date(\"2023-01-01\"), y = 5, \n           label = \"$4.823\", hjust = 1, fontface = 2, size = 3.5) + \n  theme(axis.line = element_blank(),\n        panel.background = element_blank(),\n        axis.ticks.y = element_blank()) +\n  labs(title = \"Monthly average price of a dozen eggs\",\n       x = \"\",\n       y = \"\")\n```\n\n::: {.cell-output-display}\n![](notes-analysis_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "notes-analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}